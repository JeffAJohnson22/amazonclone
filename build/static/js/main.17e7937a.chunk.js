(this.webpackJsonpamazonclone=this.webpackJsonpamazonclone||[]).push([[0],{102:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(2),a=c(27),i=c.n(a),r=(c(62),c(49)),o=c(6),l=c.p+"static/media/amazon_logo.57ffa2fe.png",j=c(51),d=c.n(j),u=c(52),b=c.n(u),h=c(50),m=c.n(h),O=(c(63),c(14)),p=Object(s.createContext)(),x=function(e){var t=e.reducer,c=e.initialState,a=e.children;return Object(n.jsx)(p.Provider,{value:Object(s.useReducer)(t,c),children:a})},_=function(){return Object(s.useContext)(p)},g=c(30),f=(c(103),c(64),g.a.initializeApp({apiKey:"AIzaSyAUKsYfwloub20MlUCng6XMqegPF7245mo",authDomain:"clone-e10bb.firebaseapp.com",projectId:"clone-e10bb",storageBucket:"clone-e10bb.appspot.com",messagingSenderId:"597961686043",appId:"1:597961686043:web:1149e2d6c2201fb17c4cbe",measurementId:"G-LTN0B9BFBE"})),v=g.a.auth(f),N=g.a.firestore(),k=function(){var e=_(),t=Object(o.a)(e,1)[0],c=t.basket,s=t.user;return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)(O.b,{to:"/",children:Object(n.jsx)("img",{className:"header__logo",alt:"amazon  logo",src:l})}),Object(n.jsx)(m.a,{className:"header__location"}),Object(n.jsxs)("div",{className:"header__option",children:[Object(n.jsx)("span",{className:"header__optionlineOne",children:"Hello"}),Object(n.jsx)("span",{className:"header__optionlineTwo",children:"Select your address"})]}),Object(n.jsxs)("div",{className:"header__search",children:[Object(n.jsx)("input",{className:"header__searchInput",type:"text"}),Object(n.jsx)(d.a,{className:"header__searchIcon"})]}),Object(n.jsxs)("div",{className:"header__nav",children:[Object(n.jsx)("div",{className:"header__option",children:Object(n.jsx)("span",{className:"header__optionlineOne",children:"Translate"})}),Object(n.jsx)(O.b,{to:!s&&"/login",children:Object(n.jsxs)("div",{className:"header__option",onClick:function(){s&&v.signOut()},children:[Object(n.jsx)("span",{className:"header__optionlineOne",children:s?"Hello ".concat(s.email):"Hello User"}),Object(n.jsx)("span",{className:"header__optionlineTwo",children:s?"Sign Out":"Sign In"})]})}),Object(n.jsx)(O.b,{to:"/orders",children:Object(n.jsxs)("div",{className:"header__option",children:[Object(n.jsx)("span",{className:"header__optionlineOne",children:"Returns"}),Object(n.jsx)("span",{className:"header__optionlineTwo",children:"& Orders"})]})}),Object(n.jsxs)("div",{className:"header__option",children:[Object(n.jsx)("span",{className:"header__optionlineOne",children:"Your"}),Object(n.jsx)("span",{className:"header__optionlineTwo",children:"Prime"})]}),Object(n.jsx)(O.b,{to:"/checkout",children:Object(n.jsxs)("div",{className:"header__optionBasket",children:[Object(n.jsx)(b.a,{}),Object(n.jsx)("span",{className:"header__optionlineTwo header__basketCount",children:null===c||void 0===c?void 0:c.length})]})})]})]})},y=(c(71),c(72),c(73),function(e){return Object(n.jsx)("div",{className:"popup-box",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("span",{className:"close-icon",onClick:e.handleClose,children:"x"}),e.content]})})}),S=function(e){var t=e.product,c=t.id,a=t.img,i=t.title,r=t.price,l=t.rating,j=_(),d=Object(o.a)(j,2),u=(d[0].basket,d[1]),b=Object(s.useState)(!1),h=Object(o.a)(b,2),m=h[0],O=h[1];return Object(n.jsxs)("div",{className:"product",children:[Object(n.jsxs)("div",{className:"product__info",children:[Object(n.jsx)("p",{children:i}),Object(n.jsxs)("p",{className:"product__price",children:[Object(n.jsx)("small",{children:"$"}),Object(n.jsx)("strong",{children:r})]}),Object(n.jsx)("div",{className:"product__rating",children:Object(n.jsx)("p",{children:"\u2b50".repeat(l)})})]}),Object(n.jsx)("img",{src:a,alt:i}),Object(n.jsx)("button",{onClick:function(){u({type:"ADD_TO_BASKET",item:{id:c,img:a,title:i,price:r,rating:l}})},children:"add to basket"}),m&&Object(n.jsx)(y,{content:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("b",{children:"Design your Popup"}),Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut "}),Object(n.jsx)("button",{children:"Test button"})]}),handleClose:function(){O(!m)}})]})},w=[{id:1234,price:1000.68,title:"Blues Eyes White Dragon",img:"https://i.ebayimg.com/images/g/fQEAAOSwXS5fYtou/s-l1600.jpg",rating:8},{id:1234,price:800.75,title:"Charizard",img:"https://i.ebayimg.com/images/g/R9QAAOSwwLNfkTcD/s-l640.jpg",rating:8}],C=[{id:1234,price:600.21,title:"PlayStation 5",img:"https://www.techinn.com/f/13776/137769822_2/sony-ps5-digital-edition.jpg",rating:6},{id:1234,price:650.68,title:"Microsoft Xbox Series X (US Plug) RRT-00001/RRT-00010 Black",img:"https://stockx.imgix.net/images/Microsoft-Xbox-Series-X-Console-Black.jpg?fit=fill&bg=FFFFFF&w=700&h=500&auto=format,compress&q=90&dpr=2&trim=color&updated_at=1605821255",rating:3},{id:1234,price:300.68,img:"https://images-na.ssl-images-amazon.com/images/I/61JnrafZ7zL._AC_SL1457_.jpg",title:"Nintendo Switch with Neon Blue and Neon Red",rating:4}],E=[{id:1234,price:750.74,title:"Apple iPhone 12 mini",img:"https://ss7.vzw.com/is/image/VerizonWireless/apple-128gb-5-4in-iphone-12-mini-blue-mg6q3ll-a?fmt=pjpg&hei=520",rating:4}],T=function(){return Object(n.jsx)("div",{className:"home",children:Object(n.jsxs)("div",{className:"home__container",children:[Object(n.jsx)("img",{className:"home__image",alt:"amazon landing page",src:"https://images.unsplash.com/photo-1602526211905-6adc54adb8d2?ixid=MXwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2124&q=80"}),Object(n.jsx)("div",{className:"home__row",children:w.map((function(e,t){return Object(n.jsx)(S,{product:e})}))}),Object(n.jsx)("div",{className:"home__row",children:C.map((function(e){return Object(n.jsx)(S,{product:e})}))}),Object(n.jsx)("div",{className:"home__row",children:E.map((function(e){return Object(n.jsx)(S,{product:e})}))})]})})},A=(c(74),c(23)),B=c.n(A),R=(c(76),c(7)),M=function(e){var t=e.items,c=Object(R.f)(),s=t.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0);return Object(n.jsxs)("div",{className:"subtotal",children:[Object(n.jsx)(B.a,{renderText:function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{children:["Subtotal (",t.length," items) :",Object(n.jsxs)("strong",{children:[e," "]})]}),Object(n.jsxs)("small",{className:"subtotal__gift",children:[Object(n.jsx)("input",{type:"checkbox"}),"This order contains a gift"]})]})},decimalScale:2,value:s,displayType:"text",thousandSeperator:!0,prefix:"$"}),Object(n.jsx)("button",{onClick:function(e){return c.push("/payment")},children:"Proceed to Checkout"})]})},z=(c(77),function(e){var t=e.items,c=t.id,s=t.img,a=t.title,i=t.price,r=t.rating,l=e.created,j=_(),d=Object(o.a)(j,2),u=(d[0].basket,d[1]);return Object(n.jsxs)("div",{className:"basket hover14",children:[Object(n.jsx)("figure",{children:Object(n.jsx)("img",{className:"basket__image",src:s,alt:a})}),Object(n.jsxs)("div",{className:"basket__info",children:[Object(n.jsx)("p",{className:"basket__title",children:a}),Object(n.jsxs)("p",{className:"basket__price",children:[Object(n.jsx)("small",{children:"$"}),Object(n.jsx)("strong",{children:i})]}),Object(n.jsx)("div",{className:"basket__rating",children:Object(n.jsx)("p",{children:"\u2b50".repeat(r)})}),!l&&Object(n.jsx)("button",{onClick:function(){u({type:"REMOVE_FROM_BASKET",id:c})},children:Object(n.jsx)("strong",{children:"remove from basket"})})]})]})}),D=function(){var e=_(),t=Object(o.a)(e,1)[0],c=t.basket,s=t.user;return Object(n.jsxs)("div",{className:"checkout",children:[Object(n.jsxs)("div",{className:"checkout__left",children:[Object(n.jsx)("img",{className:"checkout__ad",alt:"checkout banner",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{children:["Hello ",s?s.email:"User"]}),Object(n.jsx)("h2",{className:"checkout__title",children:"Your Shopping Basket"}),c.map((function(e){return Object(n.jsx)(z,{items:e},e.id)}))]})]}),Object(n.jsx)("div",{className:"checkout__right",children:Object(n.jsx)(M,{items:c})})]})},F=(c(78),function(){var e=Object(R.f)(),t=Object(s.useState)(""),c=Object(o.a)(t,2),a=c[0],i=c[1],r=Object(s.useState)(""),l=Object(o.a)(r,2),j=l[0],d=l[1];return Object(n.jsxs)("div",{className:"login",children:[Object(n.jsx)(O.b,{to:"/",children:Object(n.jsx)("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1024px-Amazon_logo.svg.png",alt:"amazon logo"})}),Object(n.jsxs)("div",{className:"login__container",children:[Object(n.jsx)("h1",{children:"Sign In"}),Object(n.jsxs)("form",{children:[Object(n.jsx)("h5",{children:"E-Mail"}),Object(n.jsx)("input",{type:"text",value:a,onChange:function(e){return i(e.target.value)}}),Object(n.jsx)("h5",{children:"Password"}),Object(n.jsx)("input",{type:"password",value:j,onChange:function(e){return d(e.target.value)}}),Object(n.jsx)("button",{className:"login__signin",onClick:function(t){t.preventDefault(),v.signInWithEmailAndPassword(a,j).then((function(t){console.log(t,"auth"),t&&e.push("/")})).catch((function(e){return alert(e.message)}))},children:Object(n.jsx)("strong",{children:"Sign In"})})]}),Object(n.jsx)("p",{children:"Bulbasaur Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ivysaur Lorem ipsum dolor sit amet, consectetur adipiscing elit. Venusaur Lorem ipsum dolor sit amet, consectetur adipiscing elit. Charmander Lorem ipsum dolor sit amet, consectetur adipiscing elit. Charmeleon Lorem ipsum dolor sit amet, consectetur adipiscing elit."}),Object(n.jsx)("button",{className:"login__signup",onClick:function(t){t.preventDefault(),v.createUserWithEmailAsindPassword(a,j).then((function(t){t&&e.push("/")})).catch((function(e){return alert(e.message)}))},children:Object(n.jsx)("strong",{children:"Create your Amazon Account"})})]})]})}),I=c(25),P=c.n(I),L=c(37),U=(c(80),c(22)),K=c(53),Y=c.n(K).a.create({baseURL:"https://us-central1-clone-e10bb.cloudfunctions.net/api "}),H=function(){var e=_(),t=Object(o.a)(e,2),c=t[0],a=c.basket,i=c.user,r=t[1],l=Object(R.f)(),j=Object(s.useState)(null),d=Object(o.a)(j,2),u=d[0],b=d[1],h=Object(s.useState)(null),m=Object(o.a)(h,2),p=m[0],x=m[1],g=Object(s.useState)(null),f=Object(o.a)(g,2),v=f[0],k=f[1],y=Object(s.useState)(!0),S=Object(o.a)(y,2),w=S[0],C=S[1],E=Object(s.useState)(!0),T=Object(o.a)(E,2),A=T[0],M=T[1],D=Object(U.useStripe)(),F=Object(U.useElements)(),I=a.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0),K=function(e){var t=(100*String(e).replace(/[$,]/gi,"")).toFixed(0);return Number(t)};Object(s.useEffect)((function(){(function(){var e=Object(L.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({method:"post",url:"payment/create?total=".concat(K(I))});case 2:t=e.sent,M(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,I]),console.log("the secret is",A);var H=function(){var e=Object(L.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(!0),e.next=4,D.confirmCardPayment(A,{payment_method:{card:F.getElement(U.CardElement)}}).then((function(e){var t=e.paymentIntent;console.log(i,"user"),N.collection("users").doc(null===i||void 0===i?void 0:i.uid).collection("orders").doc(t.id).set({basket:a,amount:t.amount,created:t.created}),x(!0),b(null),k(!1),r({type:"CLEAR_BASKET"}),l.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"payment",children:Object(n.jsxs)("div",{className:"payment__container",children:[Object(n.jsxs)("h1",{children:["Checkout ("," ",Object(n.jsxs)(O.b,{to:"/checkout",children:[" ",0===a.length?"No items in Cart":a.length+" items"]}),")"]}),Object(n.jsxs)("div",{className:"payment__section",children:[Object(n.jsx)("div",{className:"payment__title",children:Object(n.jsx)("h3",{children:"Delivery Address"})}),Object(n.jsxs)("div",{className:"payment__address",children:[Object(n.jsx)("p",{children:(null===i||void 0===i?void 0:i.email)||"User"}),Object(n.jsx)("p",{children:"123 Location"}),Object(n.jsx)("p",{children:"South Korea"})]})]}),Object(n.jsxs)("div",{className:"payment__section",children:[Object(n.jsx)("div",{className:"payment__title",children:Object(n.jsx)("h3",{children:"Review items and delivery"})}),Object(n.jsx)("div",{className:"payment__items",children:a.map((function(e){return Object(n.jsx)(z,{items:e})}))})]}),Object(n.jsxs)("div",{className:"payment__section",children:[Object(n.jsx)("div",{className:"payment__title",children:Object(n.jsx)("h3",{children:"Payment Method"})}),Object(n.jsx)("div",{className:"payment__details",children:Object(n.jsxs)("form",{onSubmit:H,children:[Object(n.jsx)(U.CardElement,{onChange:function(e){C(e.empty),b(e.error?e.error.message:"")}}),Object(n.jsxs)("div",{className:"payment__price",children:[Object(n.jsx)(B.a,{renderText:function(e){return Object(n.jsxs)("h3",{children:["Order Total: ",e]})},decimalScale:2,value:I,displayType:"text",thousandSeperator:!0,prefix:"$"}),Object(n.jsx)("button",{disabled:v||w||p,children:Object(n.jsx)("span",{children:v?Object(n.jsx)("p",{children:"Processing"}):"Buy Now"})}),u&&Object(n.jsx)("div",{children:u})]})]})})]})]})})},X=(c(98),c(99),c(54)),J=c.n(X),V=function(e){var t,c=e.order,s=c.data,a=s.created,i=s.amount;return Object(n.jsxs)("div",{className:"order",children:[Object(n.jsx)("h2",{children:"Order"}),Object(n.jsx)("p",{children:J.a.unix(c.data.created).format("MMMM Do YYYY, h:mma")}),Object(n.jsx)("p",{className:"order__id",children:Object(n.jsx)("small",{children:c.id})}),null===(t=c.data.basket)||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(z,{items:e,created:a})})),Object(n.jsx)(B.a,{renderText:function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("p",{children:Object(n.jsxs)("h3",{className:"order__total",children:["Order total: ",e," "]})})})},decimalScale:2,value:i/100,displayType:"text",thousandSeperator:!0,prefix:"$"})]})},W=function(){var e=_(),t=Object(o.a)(e,2),c=t[0],a=(c.basket,c.user),i=(t[1],Object(s.useState)([])),r=Object(o.a)(i,2),l=r[0],j=r[1];return Object(s.useEffect)((function(){a?N.collection("users").doc(null===a||void 0===a?void 0:a.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){return j(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):j([])}),[]),Object(n.jsxs)("div",{className:"orders",children:[Object(n.jsx)("h1",{children:" Your Orders "}),Object(n.jsx)("div",{className:"orders__order",children:null===l||void 0===l?void 0:l.map((function(e){return Object(n.jsx)(V,{order:e})}))})]})},$=c(55),q=Object($.a)("pk_test_ju0iMKKhjVefJJFJUcbKbgWP00Rb7RDyp8"),G=function(){var e=_(),t=Object(o.a)(e,2);Object(r.a)(t[0]);var c=t[1];return Object(s.useEffect)((function(){v.onAuthStateChanged((function(e){c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[c]),Object(n.jsx)(O.a,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(R.c,{children:[Object(n.jsx)(R.a,{path:"/login",children:Object(n.jsx)(F,{})}),Object(n.jsxs)(R.a,{path:"/checkout",children:[Object(n.jsx)(k,{}),Object(n.jsx)(D,{})]}),Object(n.jsxs)(R.a,{path:"/payment",children:[Object(n.jsx)(k,{}),Object(n.jsx)(U.Elements,{stripe:q,children:Object(n.jsx)(H,{})})]}),Object(n.jsxs)(R.a,{path:"/orders",children:[Object(n.jsx)(k,{}),Object(n.jsx)(W,{})]}),Object(n.jsxs)(R.a,{path:"/",children:[Object(n.jsx)(k,{}),Object(n.jsx)(T,{})]})]})})})},Q=c(38),Z=c(20),ee=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(Z.a)(Object(Z.a)({},e),{},{basket:[].concat(Object(Q.a)(e.basket),[t.item])});case"CLEAR_BASKET":return Object(Z.a)(Object(Z.a)({},e),{},{basket:[]});case"REMOVE_FROM_BASKET":var c=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(Q.a)(e.basket);return console.log(n),console.log(c),c>=0?n.splice(c,1):console.warn("Cant remove product (id:".concat(t.id," as its not in basket!)")),Object(Z.a)(Object(Z.a)({},e),{},{basket:n});case"SET_USER":return Object(Z.a)(Object(Z.a)({},e),{},{user:t.user});default:return e}};i.a.render(Object(n.jsx)(x,{initialState:{basket:[],user:null},reducer:ee,children:Object(n.jsx)(G,{})}),document.getElementById("root"))},62:function(e,t,c){},63:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},80:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[102,1,2]]]);
//# sourceMappingURL=main.17e7937a.chunk.js.map